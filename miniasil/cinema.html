<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì˜í™”ê´€ ì‹œë‚˜ë¦¬ì˜¤</title>

  <!-- ê³µí†µ ìŠ¤íƒ€ì¼ -->
  <link rel="stylesheet" href="styles.css" />
  <!-- ì˜í™”ê´€ ì „ìš© ìŠ¤íƒ€ì¼ -->
  <link rel="stylesheet" href="cinema.css" />
</head>
<body>
  <!-- ë©”ì¸ í™”ë©´ê³¼ ë™ì¼í•œ ìº”ë²„ìŠ¤ ë˜í¼ -->
  <div class="bg-wrapper">
    <!-- ì—¬ê¸° ì•ˆì—ì„œë§Œ ì˜í™”ê´€ UIë¥¼ ê¾¸ë¯¼ë‹¤ -->
    <div class="cinema-app">

      <!-- ìƒë‹¨ í™ˆë²„íŠ¼ -->
       <header class="cinema-header">
       <button class="home-btn" onclick="window.location.href='./'">ğŸ </button>

      </header>


      <!-- ì•ˆë‚´ ì¹´ë“œ -->
      <section class="intro-card">
        <p>
          ì „ì‹œìš© ì—ë‹ˆì–´ê·¸ë¨ ì‹œë‚˜ë¦¬ì˜¤ì…ë‹ˆë‹¤.<br />
          ì¬ë¯¸ë¡œ, ì§ê°ì ìœ¼ë¡œ ì„ íƒí•´ ì£¼ì„¸ìš”!
        </p>
      </section>

      <!-- ì§„í–‰ë°” -->
      <div class="progress-wrap">
        <div class="progress-track">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-text" id="progress-text"></div>
      </div>

      <!-- ë©”ì¸ ì½˜í…ì¸  -->
      <main class="scenario-main">

        <!-- ì˜ìƒ ì˜ì—­ (ì‹¤ì œ <video> íƒœê·¸ ì‚¬ìš©) -->
      <section class="media-card">
  <video
    id="scenario-video"
    class="media-video"
    playsinline
    muted
    autoplay
    loop
  ></video>
</section>


        <!-- ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª… -->
        <section class="scenario-text-card">
          <h2 class="scenario-title" id="scenario-title"></h2>
          <p class="scenario-text" id="scenario-text"></p>
          <p class="scenario-hint">ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥. ì„ íƒ í›„ ì•„ë˜ ë²„íŠ¼ìœ¼ë¡œ ì´ë™</p>
        </section>

        <!-- ë³´ê¸° ë¦¬ìŠ¤íŠ¸ -->
        <section class="options-card">
          <div id="options-list" class="options-list"></div>
        </section>

      </main>

      <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
      <footer class="scenario-footer">
        <button id="prevBtn" class="nav-btn nav-btn--prev">â—€ ì´ì „</button>
        <button id="nextBtn" class="nav-btn nav-btn--next" disabled>ë‹¤ìŒ â–¶</button>
      </footer>

    </div>
  </div>

  <!-- ===================== -->
  <!--       JAVASCRIPT      -->
  <!-- ===================== -->
  <script>
    /* íƒ€ì… í‚¤ */
    const TYPE_KEYS = [
      "type1","type2","type3",
      "type4","type5","type6",
      "type7","type8","type9"
    ];

    /* 9ê°œ ì‹œë‚˜ë¦¬ì˜¤ ì „ì²´ ë°ì´í„°
       ğŸ”¥ video ì´ë¦„ì„ 1.mp4 ~ 9.mp4 ë¡œ ìˆ˜ì •í•¨
       (cinema.htmlê³¼ ê°™ì€ í´ë”ì— íŒŒì¼ ë„£ì–´ë‘ë©´ ë¨)
    */
    const scenarios = [
      {
        id: 1,
        title: "ì¹œêµ¬ê°€ ì•½ì†ì„ ì–´ê²¼ì„ ë•Œ",
        description: "ì¹œêµ¬ì™€ì˜ ì ì‹¬ì•½ì† ë‚  ë‹¹ì‹ ì˜ ì¹œêµ¬ê°€ ì•½ì† ì‹œê°„ì— ëŠ¦ê±°ë‚˜ ì•½ì†ì„ ê¹œë¹¡í–ˆìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ê² ìŠµë‹ˆê¹Œ?",
        video: "1.mp4",
        options: [
          {
            text: "ì™œ ì•½ì†ì— ëŠ¦ì—ˆëƒê³  ë°”ë¡œ ë¬¼ì–´ë³¸ë‹¤.",
            score: { type1:3, type2:1, type3:0, type4:0, type5:0, type6:1, type7:0, type8:2, type9:0 }
          },
          {
            text: "ê´œì°®ì•„, ëŠ¦ì„ ìˆ˜ë„ ìˆì§€ë¼ê³  ë„ˆê·¸ëŸ½ê²Œ ì´í•´í•˜ê³  ë°›ì•„ë“¤ì¸ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:0, type5:1, type6:1, type7:2, type8:1, type9:3 }
          },
          {
            text: "ì†ìœ¼ë¡œëŠ” ë¶ˆí¸í•˜ê³  ì‹ ê²½ì“°ì´ì§€ë§Œ ê´œì°®ë‹¤ê³  í•˜ë©° ë„˜ì–´ê°„ë‹¤.",
            score: { type1:0, type2:0, type3:1, type4:0, type5:0, type6:3, type7:0, type8:1, type9:1 }
          },
          {
            text: "ì´ë²ˆì€ ê´œì°®ì•„, ê·¼ë° ë‹¤ìŒì—” ë¯¸ë¦¬ í†¡ í•œ ë²ˆë§Œ í•´ì£¼ë©´ ë” ì¢‹ì„ ê²ƒ ê°™ì•„.",
            score: { type1:1, type2:0, type3:1, type4:0, type5:0, type6:0, type7:2, type8:3, type9:0 }
          },
          {
            text: "ì˜¤íˆë ¤ ì¢‹ì•„! ì•½ì† ì§€ì—°ì„ í¬ê²Œ ì‹ ê²½ ì“°ì§€ ì•Šê³  ì˜¤íˆë ¤ ì¦ê²ê²Œ ìƒí™©ì„ ë„˜ê¸´ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:0, type5:3, type6:0, type7:3, type8:0, type9:1 }
          }
        ]
      },
      {
        id: 2,
        title: "ì§ì¥ì—ì„œ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ë§¡ê²Œ ëì„ ë•Œ",
        description: "ë‹¹ì‹ ì€ ì²˜ìŒ ë§¡ëŠ” ì¤‘ìš”í•œ í”„ë¡œì íŠ¸ë¥¼ ì±…ì„ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ê² ìŠµë‹ˆê¹Œ?",
        video: "2.mp4",
        options: [
          {
            text: "ì² ì €íˆ ëª¨ë“  ê²ƒì„ ë¯¸ë¦¬ ê³„íší•˜ê³  ì¤€ë¹„í•œë‹¤.",
            score: { type1:3, type2:0, type3:1, type4:0, type5:0, type6:1, type7:0, type8:2, type9:0 }
          },
          {
            text: "ë™ë£Œì—ê²Œ ì¡°ì–¸ì´ë‚˜ ë„ì›€ì„ êµ¬í•œë‹¤.",
            score: { type1:0, type2:3, type3:0, type4:0, type5:0, type6:2, type7:0, type8:0, type9:1 }
          },
          {
            text: "ê±±ì •ê³¼ ê¸´ì¥ì„ ëŠë¼ë©° ë¶€ë‹´ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ëŠ”ë‹¤.",
            score: { type1:0, type2:0, type3:3, type4:1, type5:0, type6:2, type7:0, type8:0, type9:0 }
          },
          {
            text: "ë„ì „ê³¼ ì—­ëŸ‰ ë°œíœ˜ì˜ ê¸°íšŒë¡œ ìƒê°í•˜ê³  ì ê·¹ì ìœ¼ë¡œ ë‚˜ì„ ë‹¤.",
            score: { type1:2, type2:0, type3:0, type4:3, type5:0, type6:0, type7:1, type8:2, type9:0 }
          },
          {
            text: "ì°½ì˜ì ì¸ ìƒˆë¡œìš´ ë°©ë²•ì„ ì‹œë„í•´ë³´ë©° í”„ë¡œì íŠ¸ë¥¼ ì¦ê²ê²Œ ì§„í–‰í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:1, type6:0, type7:3, type8:0, type9:2 }
          }
        ]
      },
      {
        id: 3,
        title: "ì¹œêµ¬ê°€ í˜ë“  ìƒí™©ì— ì²˜í–ˆì„ ë•Œ",
        description: "ìµœê·¼ ì¹œí•œ ì¹œêµ¬ê°€ ì˜ˆìƒì¹˜ ëª»í•œ ì¼ë¡œ ë§ì´ í˜ë“¤ì–´í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ ì¹œêµ¬ëŠ” í‰ì†Œë³´ë‹¤ ë§ìˆ˜ê°€ ì¤„ê³  í‘œì •ë„ ì–´ë‘¡ìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ê² ìŠµë‹ˆê¹Œ?",
        video: "3.mp4",
        options: [
          {
            text: "ì ê·¹ì ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ê±°ë‚˜ í•´ê²° ë°©ë²•ì„ ì œì‹œí•œë‹¤.",
            score: { type1:0, type2:3, type3:1, type4:0, type5:0, type6:0, type7:0, type8:2, type9:0 }
          },
          {
            text: "í•¨ê»˜ ì˜†ì—ì„œ ìˆì–´ì£¼ë©° ì¹œêµ¬ì˜ ë§ˆìŒì„ ë‹¬ë˜ì¤€ë‹¤.",
            score: { type1:0, type2:2, type3:0, type4:0, type5:1, type6:0, type7:0, type8:1, type9:3 }
          },
          {
            text: "ìƒí™©ì„ ë“£ê³  ìƒê°í•˜ê³  ë¶„ì„í•˜ì—¬ ìµœì„ ì˜ ë°©ë²•ì„ ê¶Œí•´ë³¸ë‹¤.",
            score: { type1:3, type2:0, type3:0, type4:0, type5:0, type6:2, type7:0, type8:0, type9:1 }
          },
          {
            text: "ì¹œêµ¬ê°€ í˜ë“  ìƒí™©ì„ ìŠ¤ìŠ¤ë¡œ ê·¹ë³µí•  ìˆ˜ ìˆë„ë¡ ê²©ë ¤í•˜ê³  ì‘ì›í•´ì¤€ë‹¤.",
            score: { type1:1, type2:0, type3:0, type4:0, type5:0, type6:0, type7:3, type8:2, type9:0 }
          },
          {
            text: "ì¹œêµ¬ì˜ ê¸°ë¶„ì „í™˜ì„ ìœ„í•´ í•¨ê»˜ ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ë‚¸ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:0, type6:0, type7:3, type8:0, type9:2 }
          }
        ]
      },
      {
        id: 4,
        title: "ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë ¤ì•¼ í•  ë•Œ",
        description: "ìµœê·¼ ëˆˆì—¬ê²¨ë³´ë˜ ì£¼ì‹ì´ í° ë³€ë™ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤. ì§€ê¸ˆ ì‚¬ë©´ ìˆ˜ìµì„ ë‚¼ ìˆ˜ë„ ìˆì§€ë§Œ, ì˜ëª» íŒë‹¨í•˜ë©´ ì†í•´ë¥¼ ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ê² ìŠµë‹ˆê¹Œ?",
        video: "4.mp4",
        options: [
          {
            text: "ëª¨ë“  ìš”ì†Œë¥¼ ì² ì €íˆ ë¶„ì„í•˜ê³  ê³ ë ¤í•´ ì‹ ì¤‘í•˜ê²Œ ê³„íší•˜ê³  ê²°ì •í•œë‹¤.",
            score: { type1:3, type2:0, type3:0, type4:0, type5:0, type6:1, type7:0, type8:2, type9:1 }
          },
          {
            text: "ëŠë‚Œê³¼ ì§ê´€ì— ë”°ë¼ ë¹ ë¥´ê²Œ ê²°ì •í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:3, type5:0, type6:1, type7:0, type8:2, type9:0 }
          },
          {
            text: "ì£¼ë³€ì˜ ì˜ê²¬ì„ ë“£ê³  ì°¸ê³ í•˜ì—¬ ì‹ ì¤‘í•˜ê²Œ ê²°ì •í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:0, type6:3, type7:0, type8:1, type9:1 }
          },
          {
            text: "ë§ì„¤ì´ì§€ ì•Šê³  ë°”ë¡œ ì‹¤í–‰ì— ì˜®ê¸´ë‹¤.",
            score: { type1:2, type2:0, type3:3, type4:0, type5:0, type6:0, type7:1, type8:2, type9:0 }
          },
          {
            text: "ì ì‹œ ê²°ì •ì„ ë¯¸ë£¨ë©° ì‹œê°„ì„ ê°–ê³  ë” ë§ì€ ê°€ëŠ¥ì„±ì„ íƒìƒ‰í•´ë³¸ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:1, type6:0, type7:2, type8:3, type9:0 }
          }
        ]
      },
      {
        id: 5,
        title: "ìƒˆë¡œìš´ ì‚¬ëŒë“¤ì˜ ëª¨ì„ ì°¸ì—¬",
        description: "ë‹¹ì‹ ì€ ë™ì•„ë¦¬ì— ë“¤ì–´ê°„ ì²«ë‚  íšŒì‹ì— ì°¸ì—¬í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ê² ìŠµë‹ˆê¹Œ?",
        video: "5.mp4",
        options: [
          {
            text: "ì¡°ìš©íˆ ë¶„ìœ„ê¸°ë¥¼ ê´€ì°°í•˜ë©° ì²œì²œíˆ ì ì‘í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:0, type6:2, type7:0, type8:0, type9:3 }
          },
          {
            text: "ì ê·¹ì ìœ¼ë¡œ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë¨¼ì € ë‹¤ê°€ê°€ ì¹œì ˆí•˜ê²Œ ì¸ì‚¬í•˜ê³  ëŒ€í™”í•œë‹¤.",
            score: { type1:0, type2:3, type3:1, type4:0, type5:0, type6:0, type7:1, type8:0, type9:2 }
          },
          {
            text: "ì£¼ë³€ì— ì•‰ì€ ì‚¬ëŒë“¤ê³¼ ê°€ë²¼ìš´ ëŒ€í™”ë¥¼ í•˜ë©° ì—¬ëŸ¬ ì‚¬ëŒë“¤ê³¼ ì ì°¨ ì¹œí•´ì§„ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:0, type5:1, type6:0, type7:3, type8:1, type9:2 }
          },
          {
            text: "ë‹¹ì‹ ì˜ ì¡´ì¬ê°ì„ ë“œëŸ¬ë‚´ë©° ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ë‹¹ì‹ ì˜ ì¡´ì¬ë¥¼ ê°ì¸ì‹œí‚¨ë‹¤.",
            score: { type1:1, type2:0, type3:0, type4:3, type5:0, type6:0, type7:0, type8:2, type9:0 }
          },
          {
            text: "ìë¦¬ë¥¼ ì‹ ì¤‘í•˜ê²Œ ì„ íƒí•˜ê³  ìˆ ìë¦¬ ì˜ˆì ˆì— ì‹ ê²½ì“°ë©° ê·œì¹™ê³¼ ì§ˆì„œ ìœ ì§€ì— ì‹ ê²½ì“´ë‹¤.",
            score: { type1:3, type2:0, type3:0, type4:0, type5:0, type6:1, type7:0, type8:2, type9:0 }
          }
        ]
      },
      {
        id: 6,
        title: "ì¹œêµ¬ì™€ ì˜ê²¬ ì¶©ëŒ",
        description: "ë£¸ë©”ì´íŠ¸ì™€ ìƒí™œìŠµê´€ìœ¼ë¡œ ì¸í•´ ê°ˆë“±ì´ ìƒê²¼ìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ê² ìŠµë‹ˆê¹Œ?",
        video: "6.mp4",
        options: [
          {
            text: "ë‹¹ì‹ ì˜ ì˜ê²¬ì„ ê°•í•˜ê²Œ í”¼ë ¥í•˜ì—¬ ë£¸ë©”ì´íŠ¸ì—ê²Œ ë‹¹ì‹ ì˜ ì£¼ì¥ì„ ì–´í•„í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:0, type6:0, type7:1, type8:3, type9:0 }
          },
          {
            text: "ë£¸ë©”ì´íŠ¸ì˜ ì…ì¥ì„ ì´í•´í•˜ê³  ì„œë¡œ íƒ€í˜‘ì ì„ ì°¾ìœ¼ë ¤ê³  ë…¸ë ¥í•œë‹¤.",
            score: { type1:0, type2:1, type3:0, type4:0, type5:1, type6:0, type7:0, type8:0, type9:3 }
          },
          {
            text: "ë…¼ë¦¬ì™€ ê·¼ê±°ë¥¼ ë“¤ì–´ ë£¸ë©”ì´íŠ¸ë¥¼ ì„¤ë“í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤.",
            score: { type1:3, type2:0, type3:0, type4:0, type5:0, type6:2, type7:0, type8:0, type9:1 }
          },
          {
            text: "ê°ì •ì´ ìƒí–ˆì§€ë§Œ ì†ìœ¼ë¡œ ì‚­íˆë©° í˜¼ì ê³ ë¯¼í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:3, type5:0, type6:1, type7:0, type8:0, type9:1 }
          },
          {
            text: "ê°ˆë“±ì„ í”¼í•˜ë©° ìƒí™©ì´ ì¦ê²ê²Œ ë³€í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:2, type6:0, type7:3, type8:0, type9:0 }
          }
        ]
      },
      {
        id: 7,
        title: "ì‹¤íŒ¨ ê²½í—˜",
        description: "ë‹¹ì‹ ì€ ì˜¤ë«ë™ì•ˆ ì¤€ë¹„í•œ ì‹¤í—˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ê² ìŠµë‹ˆê¹Œ?",
        video: "7.mp4",
        options: [
          {
            text: "ì‹¤íŒ¨ ìš”ì¸ì„ ë¶„ì„í•˜ê³  ë‹¤ìŒ ì‹¤í—˜ì„ íƒ„íƒ„í•˜ê²Œ ì¤€ë¹„í•œë‹¤.",
            score: { type1:3, type2:0, type3:0, type4:0, type5:0, type6:1, type7:0, type8:2, type9:0 }
          },
          {
            text: "ë§¤ìš° ì†ìƒí•´í•˜ë©° ìŠ¤ìŠ¤ë¡œë¥¼ ìì±…í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:3, type5:0, type6:1, type7:0, type8:0, type9:2 }
          },
          {
            text: "ì£¼ë³€ ì‚¬ëŒì˜ ë„ì›€ìœ¼ë¡œ ì‹¤íŒ¨ì˜ ì•„í””ì„ íšŒë³µí•œë‹¤.",
            score: { type1:0, type2:3, type3:0, type4:0, type5:0, type6:0, type7:1, type8:0, type9:2 }
          },
          {
            text: "ìƒˆë¡œìš´ ê°€ì„¤ì„ ì„¤ì •í•˜ì—¬ ìƒˆë¡œìš´ ì‹¤í—˜ì— ë„ì „í•œë‹¤.",
            score: { type1:2, type2:0, type3:3, type4:0, type5:0, type6:0, type7:1, type8:2, type9:0 }
          },
          {
            text: "ì‹¤íŒ¨ì— í¬ê²Œ ì‹ ê²½ì“°ì§€ ì•Šê³  ì‹¤íŒ¨ë¥¼ ê¸ì •ì ìœ¼ë¡œ ë°›ì•„ë“¤ì¸ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:2, type6:0, type7:3, type8:0, type9:1 }
          }
        ]
      },
      {
        id: 8,
        title: "ì˜ˆìƒì¹˜ ëª»í•œ ìœ„ê¸°",
        description: "ì¹œêµ¬ë“¤ê³¼ì˜ í•´ì™¸ì—¬í–‰ì—ì„œ ê°‘ì‘ìŠ¤ëŸ½ê²Œ í˜¸í…”ì˜ˆì•½ì´ ëˆ„ë½ëë‹¤ëŠ” ê±¸ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì€ ì–´ë–»ê²Œ ë°˜ì‘í•˜ê² ìŠµë‹ˆê¹Œ?",
        video: "8.mp4",
        options: [
          {
            text: "ì¹¨ì°©í•¨ì„ ìœ ì§€í•˜ë©° ê³„íšì ìœ¼ë¡œ ë¬¸ì œì— ëŒ€ì‘í•œë‹¤.",
            score: { type1:3, type2:0, type3:0, type4:0, type5:0, type6:1, type7:0, type8:2, type9:1 }
          },
          {
            text: "ì£¼ë³€ ì‚¬ëŒì„ ì±™ê¸°ë©° ìƒí™©ì„ ì•ˆì •ì‹œí‚¨ë‹¤.",
            score: { type1:0, type2:3, type3:1, type4:0, type5:0, type6:1, type7:0, type8:1, type9:2 }
          },
          {
            text: "ì£¼ë„ê¶Œì„ ì¥ê³  ì§ì ‘ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.",
            score: { type1:1, type2:0, type3:0, type4:0, type5:0, type6:0, type7:3, type8:2, type9:0 }
          },
          {
            text: "ë‹¹í™©í•˜ê³  ë§ˆìŒì´ í”ë“¤ë¦¬ì§€ë§Œ ì´ë²ˆì¼ì„ í†µí•´ ë‹¤ìŒì—ëŠ” ì´ëŸ° ì¼ì´ ë°œìƒí•˜ì§€ ì•Šìœ¼ë ¤ í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:3, type5:0, type6:1, type7:0, type8:0, type9:2 }
          },
          {
            text: "ìœ„ê¸°ë¥¼ ê¸°íšŒë¡œ ìƒê°í•˜ë©° ê¸ì •ì ìœ¼ë¡œ ë¬¸ì œì— ì ‘ê·¼í•œë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:3, type6:0, type7:2, type8:0, type9:0 }
          }
        ]
      },
      {
        id: 9,
        title: "ì—¬ìœ ë¡œìš´ íœ´ì‹",
        description: "ìœ ë‹¬ë¦¬ ë°”ë¹´ë˜ ì´ë²ˆì£¼, ì£¼ë§ì´ ë‹¤ê°€ì™”ìŠµë‹ˆë‹¤. ì´ë•Œ ë‹¹ì‹ ì´ ê°€ì¥ í•˜ê³  ì‹¶ì€ í™œë™ì€?",
        video: "9.mp4",
        options: [
          {
            text: "ì¡°ìš©íˆ í˜¼ì ì±…ì„ ì½ê±°ë‚˜ ê³µë¶€í•˜ë©° ì‹œê°„ì„ ë³´ë‚¸ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:0, type5:0, type6:0, type7:0, type8:1, type9:3 }
          },
          {
            text: "ì¹œêµ¬ë‚˜ ê°€ì¡±ê³¼ í•¨ê»˜ ì‹œê°„ì„ ë³´ë‚´ë©° ì¹œë°€ê°ì„ ëŠë‚€ë‹¤.",
            score: { type1:0, type2:3, type3:1, type4:0, type5:0, type6:0, type7:0, type8:0, type9:2 }
          },
          {
            text: "ê·¸ë¦¼ì„ ê·¸ë¦¬ê±°ë‚˜ ê¸€ì„ ì“°ë©° ë‚˜ë§Œì˜ ì‹œê°„ì„ ì¦ê¸´ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:3, type5:0, type6:1, type7:0, type8:0, type9:2 }
          },
          {
            text: "ì§§ì€ ì—¬í–‰ì´ë‚˜ ì™¸ì¶œì„ ê³„íší•˜ê³  ë‚˜ì„ ë‹¤.",
            score: { type1:0, type2:0, type3:0, type4:1, type5:0, type6:0, type7:3, type8:0, type9:2 }
          },
          {
            text: "ê³„íšì ìœ¼ë¡œ íœ´ì‹ì„ ì·¨í•˜ë©° ìê¸°ê³„ë°œë„ ì±™ê¸´ë‹¤.",
            score: { type1:3, type2:0, type3:0, type4:0, type5:0, type6:1, type7:0, type8:2, type9:0 }
          }
        ]
      }
    ];

    const TOTAL = scenarios.length;
    let currentIndex = 0;
    const answers = Array(TOTAL).fill(null);

    /* DOM */
    const progressFill = document.getElementById("progress-fill");
    const progressText = document.getElementById("progress-text");
    const videoEl = document.getElementById("scenario-video");
    const scenarioTitleEl = document.getElementById("scenario-title");
    const scenarioTextEl = document.getElementById("scenario-text");
    const optionsListEl = document.getElementById("options-list");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    /* ë Œë”ë§ */
    function renderScenario(idx) {
      const s = scenarios[idx];

      // ì§„í–‰ë„
      progressFill.style.width = ((idx + 1) / TOTAL) * 100 + "%";
      progressText.textContent = `${idx + 1} / ${TOTAL}`;

      // í…ìŠ¤íŠ¸
      scenarioTitleEl.textContent = s.title;
      scenarioTextEl.textContent = s.description;

      // ğŸ”¥ ë¹„ë””ì˜¤ ì„¤ì •
      // ğŸ”¥ ë¹„ë””ì˜¤ ì„¤ì • (ìë™ì¬ìƒ + ë°˜ë³µ)
if (s.video) {
  videoEl.style.display = "block";
  videoEl.src = s.video;
  videoEl.currentTime = 0;
  videoEl.play().catch(() => {});
} else {
  videoEl.style.display = "none";
  videoEl.removeAttribute("src");
}


      // ë³´ê¸° ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
      optionsListEl.innerHTML = "";
      s.options.forEach((opt, optIndex) => {
        const label = document.createElement("label");
        label.className = "option-item";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.value = optIndex;
        checkbox.className = "option-checkbox";

        if (answers[idx] && answers[idx].includes(optIndex)) {
          checkbox.checked = true;
        }

        checkbox.addEventListener("change", () => {
          handleOptionChange(idx, optIndex, checkbox.checked);
        });

        const span = document.createElement("span");
        span.className = "option-label";
        span.textContent = opt.text;

        label.appendChild(checkbox);
        label.appendChild(span);
        optionsListEl.appendChild(label);
      });

      prevBtn.disabled = idx === 0;
      updateNextButtonState();
      nextBtn.textContent = idx === TOTAL - 1 ? "ê²°ê³¼ ë³´ê¸° â–¶" : "ë‹¤ìŒ â–¶";
    }

    function handleOptionChange(scenarioIdx, optIdx, checked) {
      let selected = answers[scenarioIdx] || [];

      if (checked) {
        if (!selected.includes(optIdx)) selected.push(optIdx);
      } else {
        selected = selected.filter((i) => i !== optIdx);
      }

      answers[scenarioIdx] = selected.length ? selected : null;
      updateNextButtonState();
    }

    function updateNextButtonState() {
      const selected = answers[currentIndex];
      nextBtn.disabled = !selected || selected.length === 0;
    }

    /* íƒ€ì…ë³„ ì ìˆ˜ í•©ì‚° */
    function calculateTypeScores() {
      const totals = {};
      TYPE_KEYS.forEach((t) => (totals[t] = 0));

      answers.forEach((selected, scenarioIndex) => {
        if (!selected) return;
        selected.forEach((optIndex) => {
          const opt = scenarios[scenarioIndex].options[optIndex];
          if (!opt || !opt.score) return;
          TYPE_KEYS.forEach((t) => {
            totals[t] += opt.score[t] || 0;
          });
        });
      });

      return totals;
    }

    /* ë™ì  ì²˜ë¦¬ ê·œì¹™ */
    function resolvePrimaryTypes(typeScores) {
      const maxScore = Math.max(...TYPE_KEYS.map((t) => typeScores[t]));
      let candidates = TYPE_KEYS.filter((t) => typeScores[t] === maxScore);

      // 1) ìµœê·¼ ì‹œë‚˜ë¦¬ì˜¤ ìš°ì„ 
      for (let i = scenarios.length - 1; i >= 0 && candidates.length > 1; i--) {
        const selected = answers[i] || [];
        if (!selected.length) continue;

        const scenarioScore = {};
        candidates.forEach((t) => (scenarioScore[t] = 0));

        selected.forEach((optIdx) => {
          const opt = scenarios[i].options[optIdx];
          if (!opt || !opt.score) return;
          candidates.forEach((t) => {
            scenarioScore[t] += opt.score[t] || 0;
          });
        });

        const maxScenarioScore = Math.max(...candidates.map((t) => scenarioScore[t]));
        if (maxScenarioScore <= 0) continue;

        const best = candidates.filter((t) => scenarioScore[t] === maxScenarioScore);
        if (best.length === 1) return best;
        candidates = best;
      }

      // 2) ì ìˆ˜ë¥¼ ì–»ì€ ì‹œë‚˜ë¦¬ì˜¤ ê°œìˆ˜ ë¹„êµ
      if (candidates.length > 1) {
        const scenarioCounts = {};
        candidates.forEach((t) => (scenarioCounts[t] = 0));

        scenarios.forEach((sc, i) => {
          const selected = answers[i] || [];
          if (!selected.length) return;

          candidates.forEach((t) => {
            const got = selected.some(
              (optIdx) => (sc.options[optIdx].score[t] || 0) > 0
            );
            if (got) scenarioCounts[t] += 1;
          });
        });

        const maxCount = Math.max(...candidates.map((t) => scenarioCounts[t]));
        const bestByCount = candidates.filter((t) => scenarioCounts[t] === maxCount);

        if (bestByCount.length === 1) return bestByCount;
        candidates = bestByCount;
      }

      // 3) ê·¸ë˜ë„ ë‚¨ìœ¼ë©´ ë³µí•©ìœ í˜•
      return candidates;
    }

    /* ë²„íŠ¼ ì´ë²¤íŠ¸ */
    prevBtn.addEventListener("click", () => {
      if (currentIndex > 0) {
        currentIndex -= 1;
        renderScenario(currentIndex);
      }
    });

    nextBtn.addEventListener("click", () => {
      const selected = answers[currentIndex];
      if (!selected || selected.length === 0) return;

      if (currentIndex < TOTAL - 1) {
        currentIndex += 1;
        renderScenario(currentIndex);
     } else {
  const typeScores = calculateTypeScores();
  const primaryTypes = resolvePrimaryTypes(typeScores);

  localStorage.setItem("cinemaTypeScores", JSON.stringify(typeScores));
  localStorage.setItem("cinemaPrimaryTypes", JSON.stringify(primaryTypes));

  window.location.href = "result.html";
}


    });

    // ì²« í™”ë©´ ë Œë”ë§
    renderScenario(currentIndex);
  </script>
</body>
</html>
